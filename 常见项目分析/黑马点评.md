B站黑马点评项目（假设是教学案例中的典型点评类系统）通常采用的是 **分层架构** 和 **分布式技术栈** 的结合，以支持高并发、高可用性和可扩展性。以下是其典型的架构设计和技术选型：

---

### **1. 整体架构分层**
#### **1.1 客户端层**
- **前端**：Vue.js/React + 移动端（H5/小程序/App）  
  - 使用主流前端框架实现动态页面，前后端分离。
  - 可能搭配 Nuxt.js/Next.js 优化 SEO 或首屏渲染。

#### **1.2 网关层**
- **API 网关**：Spring Cloud Gateway / Nginx  
  - 统一路由、负载均衡、限流、鉴权。
  - 处理跨域、请求过滤、流量控制。

#### **1.3 业务服务层**
- **微服务架构**：Spring Cloud Alibaba/Spring Cloud  
  - 拆分核心业务为独立服务（如用户服务、商品服务、订单服务、点评服务）。
  - 使用 **Dubbo** 或 **Feign** 实现服务间通信。

#### **1.4 数据层**
- **数据库**：MySQL（主从读写分离 + 分库分表）  
  - 核心业务数据存储，使用 ShardingSphere 分片。
- **缓存**：Redis（集群 + 哨兵模式）  
  - 热点数据缓存（如商品详情、用户会话、分布式锁）。
- **搜索引擎**：Elasticsearch  
  - 支持复杂查询（如点评内容搜索、附近店铺检索）。
- **消息队列**：RabbitMQ/Kafka  
  - 异步解耦（如订单超时取消、点评审核通知）。

#### **1.5 基础设施层**
- **容器化**：Docker + Kubernetes  
  - 服务部署和弹性伸缩。
- **监控**：Prometheus + Grafana + SkyWalking  
  - 性能监控、链路追踪、日志收集。
- **配置中心**：Nacos/Apollo  
  - 统一管理配置，支持动态更新。

---

### **2. 核心业务场景的架构设计**
#### **2.1 点评发布与展示**
- **写流程**：  
  1. 用户提交点评 → 网关鉴权 → 点评服务写入 MySQL。  
  2. 异步消息通知审核服务（RabbitMQ）。  
  3. 审核通过后，更新 Redis 缓存和 Elasticsearch 索引。
- **读流程**：  
  - 优先读 Redis 缓存，未命中则查 MySQL 并回填缓存。  
  - 复杂查询（如按评分排序）走 Elasticsearch。

#### **2.2 高并发抢购/秒杀**
- **Redis 预减库存**：  
  1. 活动开始前，库存预热到 Redis。  
  2. 用户请求时，通过 Lua 脚本原子化扣减 Redis 库存。  
  3. 异步消息队列处理 MySQL 最终库存和订单创建。  
- **限流与降级**：  
  - 网关层限流（令牌桶算法），服务熔断（Sentinel）。

#### **2.3 附近店铺推荐**
- **地理位置搜索**：  
  - MySQL 存储店铺经纬度，通过 `GEOMETRY` 类型和空间索引优化。  
  - 或使用 Redis GEO 数据结构快速计算距离。  
  - 复杂场景下用 Elasticsearch 的 `geo_distance` 查询。

---

### **3. 技术栈详解**
| **模块**     | **技术选型**                           | **作用**                      |
| ------------ | -------------------------------------- | ----------------------------- |
| **前端**     | Vue3 + Vite + Element Plus             | 动态页面构建，组件化开发      |
| **后端框架** | Spring Boot 2.x + Spring Cloud Alibaba | 快速构建微服务                |
| **数据库**   | MySQL 8.0 + MyBatis-Plus               | 数据持久化，ORM 简化 SQL 操作 |
| **缓存**     | Redis 6.x（集群模式）                  | 热点数据缓存，分布式锁        |
| **搜索**     | Elasticsearch 7.x + IK 分词器          | 全文检索，复杂查询优化        |
| **消息队列** | RabbitMQ 3.9                           | 异步解耦，削峰填谷            |
| **容器编排** | Docker + Kubernetes                    | 服务部署与扩缩容              |
| **监控**     | Prometheus + SkyWalking                | 性能监控与链路追踪            |
| **安全**     | JWT + OAuth2 + Spring Security         | 用户认证与权限控制            |

---

### **4. 架构优化点**
1. **读写分离**：  
   - MySQL 主库处理写操作，从库处理读操作，通过 ShardingSphere 自动路由。
2. **缓存穿透/雪崩**：  
   - 空值缓存 + 布隆过滤器（缓存穿透）。  
   - 随机过期时间 + 多级缓存（缓存雪崩）。
3. **分布式事务**：  
   - 最终一致性：基于消息队列（如 RocketMQ 事务消息）。  
   - 强一致性：Seata AT 模式（2PC 实现）。
4. **静态资源优化**：  
   - CDN 加速图片、视频加载，OSS 存储海量文件。

---

### **5. 适用场景总结**
该架构适合 **中小型高并发互联网应用**，如电商、社交、本地生活服务等场景，平衡了开发效率与性能要求。教学项目中会简化部分生产级细节（如全链路压测、灾备方案），但核心设计思想与实际工业级架构一致。